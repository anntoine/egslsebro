!function(a){function e(a,e){var r=Array.prototype.slice.call(arguments);return new Promise(function(s,t){var p=NIApi.flashViewer[window.apiActionScriptConfig.actionScriptApiMethod](JSON.stringify({method:a+"."+e,args:r}));"SUCCESS"===p.message?s(p.datas):t(p.message)})}var r="";a.Class.CommonApi.prototype.resolveActionScriptCall=function(a){if("event"===a.method){var e=a.args[0],s=e.visiblePages.map(function(a){return parseInt(a.index+1,10)}),t={1:s[0]};s[1]&&(t[2]=s[1]);var p="event",i="",n={};switch(e.type){case"nextPage":i="pageNext",n[1]=t[1]-1;break;case"prevPage":i="pagePrev",n[1]=t[1]+1;break;case"bookmarkAdd":i="bookmark",n[1]=parseInt(e.params.value,10)+1;break;case"print":i="print",n[1]=e.params.param;break;case"twitterShare":case"facebookShare":case"tumblrShare":case"linkedinShare":case"pinterestShare":i="share",n[1]=e.type.replace("Share","");break;case"sendEmail":i="share",n[1]="mail";break;case"videoBegin":case"videoResume":i="videoPlay",n[1]=Math.round(e.params.at);break;case"videoPause":i="videoPause",n[1]=Math.round(e.params.at);break;case"videoEnd":i="videoEnd";break;case"downloadPdf":i="pdfDownload",n[1]=e.params.value;break;case"url":i="externalLink",n[1]=e.params.param;break;default:p="page"}switch(e.type){case"page":if(NIApi.stat.trackEvent("pageView",{1:parseInt(e.params.value,10)+1}),r===s.join("-"))break;i="page",n=t,r=s.join("-");break;case"pageZoomIn":i="zoom",n=t;break;case"setState":"thumbnails"===e.params.param&&(i="thumbnails");break;case"toggleActivate":"panel_search"===e.params.param?i="search":"panel_pdf"===e.params.param?i="pdf":"panel_print"===e.params.param?i="print":"panel_summary"===e.params.param?i="contents":"panel_email"===e.params.param?i="share-email":"panel_share"===e.params.param&&(i="share");break;case"search":i="search",n[1]=e.params.value;break;case"addProduct":i="wishlist-product",n[1]=e.params.param;break;case"whishlist":"cart-display"===e.params.event?i="wishlist-list":"checkout-display"===e.params.event?i="wishlist-checkout":"checkout-submitted"===e.params.event&&(i="wishlist-submitted",p="event")}"fromPage"===e.targetName&&"click"===e.params.event&&(i="link",p="event",n[1]=e.params.type,n[2]=e.params.param),i&&("page"===p?NIApi.stat.trackPage(i,n):"event"===p&&NIApi.stat.trackEvent(i,n))}};var s=window.NIApi.getFunctionList();for(var t in s)for(var p=0;p<s[t].length;p++){var i=s[t][p];NIApi.register("page.getCount",e.bind({},t,i))}}(webpublicationNamespace);