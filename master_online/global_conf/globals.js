Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),window.addEventListener=window.addEventListener||function(){},!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(t){return h=t,v}}function o(e,t){try{return e(t)}catch(n){return h=n,v}}function a(e,t,n){try{e(t,n)}catch(r){return h=r,v}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&m(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),l(e,new g(t,n,a))})}function l(e,t){for(;3===e._37;)e=e._12;return 0===e._37?void e._59.push(t):void d(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._37?c(t.promise,e._12):f(t.promise,e._12));var r=o(n,e._12);r===v?f(t.promise,h):c(t.promise,r)})}function c(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===v)return f(e,h);if(n===e.then&&t instanceof s)return e._37=3,e._12=t,void p(e);if("function"==typeof n)return void m(n.bind(t),e)}e._37=1,e._12=t,p(e)}function f(e,t){e._37=2,e._12=t,p(e)}function p(e){for(var t=0;t<e._59.length;t++)l(e,e._59[t]);e._59=null}function g(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==v||(n=!0,f(t,h))}var d=e("asap/raw"),h=null,v={};t.exports=s,s._99=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return l(this,new g(e,t,n)),n}},{"asap/raw":4}],2:[function(e,t,n){"use strict";function r(e){var t=new i(i._99);return t._37=1,t._12=e,t}var i=e("./core.js");t.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(e===!0)return o;if(e===!1)return a;if(0===e)return l;if(""===e)return c;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(n){return new i(function(e,t){t(n)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._37;)s=s._12;return 1===s._37?r(a,s._12):(2===s._37&&n(s._12),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"==typeof u){var l=new i(u.bind(s));return void l.then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":1}],3:[function(e,t,n){"use strict";function r(){if(u.length)throw u.shift()}function i(e){var t;t=s.length?s.pop():new o,t.task=e,a(t)}function o(){this.task=null}var a=e("./raw"),s=[],u=[],l=a.makeRequestCallFromTimer(r);t.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(u.push(e),l())}finally{this.task=null,s[s.length]=this}}},{"./raw":4}],4:[function(e,t,n){(function(e){"use strict";function n(e){s.length||(a(),u=!0),s[s.length]=e}function r(){for(;l<s.length;){var e=l;if(l+=1,s[e].call(),l>c){for(var t=0,n=s.length-l;n>t;t++)s[t]=s[t+l];s.length-=l,l=0}}s.length=0,l=0,u=!1}function i(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var a,s=[],u=!1,l=0,c=1024,f=e.MutationObserver||e.WebKitMutationObserver;a="function"==typeof f?i(r):o(r),n.requestFlush=a,n.makeRequestCallFromTimer=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],6:[function(e,t,n){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":1,"./lib/es6-extensions.js":2,"./polyfill-done.js":5,asap:3}]},{},[6]),function(){function e(e){this.message=e}var t="undefined"!=typeof exports?exports:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var r,i,o=String(t),a=0,s=n,u="";o.charAt(0|a)||(s="=",a%1);u+=s.charAt(63&r>>8-a%1*8)){if(i=o.charCodeAt(a+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return u}),t.atob||(t.atob=function(t){var r=String(t).replace(/=+$/,"");if(r.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,a=0,s=0,u="";o=r.charAt(s++);~o&&(i=a%4?64*i+o:o,a++%4)?u+=String.fromCharCode(255&i>>(-2*a&6)):0)o=n.indexOf(o);return u})}(),"undefined"==typeof webpublicationNamespace&&(window.webpublicationNamespace={Class:{},Main:{trackerManager:{trackPage:function(){},trackEvent:function(){}}},Param:{pathRoot:"publication/"},Utils:{}}),function(e){function t(){for(var e in r){this[e]={};for(var t=0;t<r[e].length;t++)this[e][r[e][t]]=this.defaultCall.bind(this,e,r[e][t])}}var n=[],r={common:["getValue","resolveValues","getDeviceInformation","getVersion","debugMode"],page:["getVisiblePages","getCount","addNewLink","removeLinkByID","open","openNext","openPrevious","shareSocial","openFirst","openLast","clickLink","clickButton","downloadPDF","print"],tab:["open"],navigator:["openUrl"],viewer:["changeMode","getCurrentMode"],content:["getContentURLByID","getContentAssetByID"],menu:["open","close","activate","desactivate"],lightbox:["open","openPopup","close","getOpenList","closeAll"],stat:["trackPage","trackEvent","trackCustomPage","trackCustomEvent"],wishlist:["addProduct"],event:["onPageChange"]};window.apiActionScriptConfig={actionScriptApiMethod:"commonApiActionScriptCall",javaScriptNamespace:"webpublicationNamespace",javaScriptApiMethod:"NIApi.call",javaScriptEventMethod:"NIApi.event"},window.setExternalInterfaceIsReady=function(e){return NIApi.flashViewer=document.getElementById("Visio"),window.apiActionScriptInfo=e,window.externalInterfaceIsReady=!0,window.apiActionScriptConfig},window.addEventListener("message",function(e){if("string"==typeof e.data&&0===e.data.indexOf("api/")){for(var t=e.data.replace("api/","").split("/"),n=0;n<t.length;n++)t[n]=decodeURIComponent(t[n]);var r=t.shift().split("."),i=NIApi[r[0]][r[1]].apply(NIApi,t);e.source&&("event"===r[0]?e.source.postMessage({method:r.join("."),arguments:t,result:i},e.origin):i.then(function(n){e.source.postMessage({method:r.join("."),arguments:t,result:n},e.origin)}))}},!1),t.prototype.defaultCall=function(){var e=Array.prototype.slice.call(arguments);return new Promise(function(t,r){n.push({resolve:t,args:e})})},t.prototype.register=function(e,t){var n=e.split(".");this[n[0]][n[1]]=t;for(var r=this.getQueryList(),i=0;i<r.length;i++)r[i].args[0]===n[0]&&r[i].args[1]===n[1]&&(r[i].resolve(t.apply(this,r[i].args.splice(2))),r.splice(i,1))},t.prototype.call=function(t){return"flash"!==e.Main.switcher.mode?!1:("event"===t.method&&"init"===t.args[0].type&&e.require(["../../global_conf/api_as3.js"]).then(function(){t.args[0].type="page";for(var e=0;e<t.args[0].visiblePages.length;e++)t.args[0].params.value=t.args[0].visiblePages[e].value,this.resolveActionScriptCall(t)}.bind(this)),this.resolveActionScriptCall?this.resolveActionScriptCall(t):void 0)},t.prototype.getFunctionList=function(){return r},t.prototype.getQueryList=function(){return n},e.Class.CommonApi=t,window.NIApi=new e.Class.CommonApi}(webpublicationNamespace),function(e){var t=!0;e.Utils._assertDebug=function(e){return e===!0?t=!0:e===!1&&(t=!1),t},e.Utils._assert=function(e,n){return e===!1&&t===!0&&console.error(n),e},e.Utils._assertInteger=function(t,n){return e.Utils._assert(t%1===0,n)},e.Utils._assertString=function(t,n){return e.Utils._assert("string"==typeof t,n)},e.Utils._assertBoolean=function(t,n){return e.Utils._assert("boolean"==typeof t,n)},e.Utils._assertJson=function(t,n){if(e.Utils._assert("string"==typeof t,n)){var r=!0;try{{JSON.parse(t)}}catch(i){r=!1}return e.Utils._assert(r,n)}return!1},e.Utils._assertObject=function(t,n){return e.Utils._assert("object"==typeof t,n)},e.Utils._assertFunction=function(t,n){return e.Utils._assert("function"==typeof t,n)},e.Utils._assertOneOf=function(t,n,r){return e.Utils._assert(n.indexOf(t)>=0,r)},e.Utils.noop=function(){},e.Utils.callEvent=function(){return"CustomEvent"in window&&"function"==typeof window.CustomEvent?function(e,t,n){var r=new CustomEvent(t,{bubbles:!0,cancelable:!0});r.bubbles=!0,r.args=n,r&&e.dispatchEvent(r)}:function(e,t,n){var r;try{r=document.createEvent("HTMLEvents")}catch(i){r=document.createEvent("Event")}r.initEvent(t,!0,!0),r.bubbles=!0,r.args=n,r&&e.dispatchEvent(r)}}(),e.Utils.getClosestByClass=function(e,t){do if(e.classList&&e.classList.contains(t)===!0)return e;while(null!==(e=e.parentNode));return!1},e.Utils.getClosestByAttribute=function(e,t){do{var n=e.attributes?e.attributes.length:!1;if(n&&n>0&&e.getAttribute(t))return e}while(null!==(e=e.parentNode));return!1},e.Utils.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},e.Utils.promiseXHR=function(e,t,n,r){return r=r||null,new Promise(function(i,o){var a=new XMLHttpRequest;if(a.open(e,t,!0),n instanceof Array)for(var s=0;s<n.length;s++)"undefined"!=typeof n[s]&&("resolve"===n[s].key&&(o=i),"overrideMimeType"===n[s].key?a.overrideMimeType(n[s].value):"Authorization"===n[s].key?(a.withCredentials=!0,a.setRequestHeader(n[s].key,"Basic "+btoa(n[s].username+":"+n[s].password))):a.setRequestHeader(n[s].key,n[s].value));a.onreadystatechange=function(){4===a.readyState&&(404===a.status?o(a):i(a))};try{a.send(r)}catch(u){o(a)}})},e.Utils.setCookie=function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+i},e.Utils.resolveVariable=function(t){if(t&&"string"==typeof t){var n,r="",i="",o=t.match(/\$([A-Za-z0-9-_]+)\$/gi);if(o)for(n=0;n<o.length;n++)r=o[n].substring(1,o[n].length-1),i=e.Main.urlManager.get(r)||e.Main.xmlManager.getVariable(r),"transferring"===r&&e.Main.xmlManager.getVariable(r)&&(i=e.Main.xmlManager.getVariable(r)),i&&(t=t.replace(o[n],i));if(o=t.match(/\$\{([A-Za-z0-9-_]+)\}/gi))for(n=0;n<o.length;n++)r=o[n].substring(2,o[n].length-1),i=e.Main.urlManager.get(r)||e.Main.xmlManager.getVariable(r),"transferring"===r&&e.Main.xmlManager.getVariable(r)&&(i=e.Main.xmlManager.getVariable(r)),i&&(t=t.replace(o[n],i));return t}return""},NIApi.register("common.resolveValues",function(t){return Promise.resolve(e.Utils.resolveVariable(t))}),NIApi.register("common.getValue",function(t){return Promise.resolve(e.Main.xmlManager.getVariable(t))}),e.Utils.resolveTranslation=function(t){if(t&&"string"==typeof t){var n=t.match(/\#([A-Za-z0-9-_]+)\#/gi);if(n)for(var r="",i="",o=0;o<n.length;o++)r=n[o].substring(1,n[o].length-1),i=e.Main.xmlManager.get("locale",r),i&&(t=t.replace(n[o],i));return t}return""},e.Utils.resolveString=function(t){for(var n="",r=t;n!==r;)n=e.Utils.resolveTranslation(e.Utils.resolveVariable(r)),r=e.Utils.resolveTranslation(e.Utils.resolveVariable(n));return n},e.Utils.getFunctionName=function(e){var t="function"==typeof e,n=t&&(e.name&&["",e.name]||e.toString().match(/function ([^\(]+)/));return!t&&"not a function"||n&&n[1]||"anonymous"},e.Utils.hexToRgb=function(){function e(e){return parseInt(e.substring(0,2),16)}function t(e){return parseInt(e.substring(2,4),16)}function n(e){return parseInt(e.substring(4,6),16)}function r(e){return"#"===e.charAt(0)?e.substring(1):e}return function(i,o){i=r(i);var a=e(i),s=t(i),u=n(i);return"undefined"!=typeof o?"rgba("+a+","+s+","+u+","+o+")":"rgb("+a+","+s+","+u+")"}}(),e.Utils.whitelistParameters=function(t){var n=[e.Main.xmlManager.get("config","transferringVariable"),"bookmarks","bookmark","gallery","initState","lng","page","startPage","transferring","utm_campaign","utm_content","utm_medium","utm_source","utm_term"],r=document.createElement("a");r.href=t;var i=[],o=r.search.replace("?","");o=o.split("&");for(var a=0;a<o.length;a++){var s=o[a].split("=");n.indexOf(s[0])>=0&&i.push(o[a])}return r.search="?"+i.join("&"),r.href},e.Utils.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}(webpublicationNamespace),function(e){function t(t){return a.hasOwnProperty(t)===!1&&(a[t]=new Promise(function(n,r){o(t).then(function(t){e.Utils.promiseXHR("GET",t).then(function(r){n(!0),404!==r.status&&e.Main.cssManager.parseCss(r.responseText,t)})["catch"](n)})})),a[t]}function n(e){return a.hasOwnProperty(e)===!1&&(a[e]=new Promise(function(t,n){o(e).then(function(e){var n=document.createElement("script");n.src=e,n.onload=t,n.onerror=t,document.head.appendChild(n)})})),a[e]}function r(t){return o(t).then(function(t){return e.Utils.promiseXHR("GET",t)})}var i={css:{},js:{},template:{}},o=function(){function t(e){var t=JSON.parse(e.responseText);for(var n in t.template)t.template[n]&&(i.template["publication/mobile/template/"+n+".html"]=t.template[n]);for(n in t.css)t.css[n]&&(i.css["css/"+n+".css"]=t.css[n]);for(n in t.js)t.js[n]&&(i.js["js/"+n+".js"]=t.js[n]);return Promise.resolve(i)}var n=null;return function(r){if(null===n){var o=e.Main.xmlManager.get("common-ui","assets","custom_template");n=o?e.Utils.promiseXHR("GET",e.Utils.resolveVariable("$template$template.json")).then(t)["catch"](function(){return Promise.resolve({css:{},js:{},template:{}})}):Promise.resolve({css:{},js:{},template:{}})}return n.then(function(){return-1!==r.indexOf(".css")?r=i.css[r]?i.css[r]:e.Main.xmlManager.getVariable("root")+"mobile/"+r:-1!==r.indexOf(".js")?r=i.js[r]?i.js[r]:e.Main.xmlManager.getVariable("root")+"mobile/"+r:-1!==r.indexOf(".html")&&i.template[r]&&(r=i.template[r]),r=e.Utils.resolveVariable(r),Promise.resolve(r)})}}(),a={};e.require=function(e){if("string"==typeof e)return r(e);for(var i=[],o=0,a=e.length;a>o;o++)0===e[o].indexOf("css/")?i.push(t(e[o]+".css")):0===e[o].indexOf("js/")?i.push(n(e[o]+".js")):-1!==e[o].indexOf(".js")?i.push(n(e[o])):-1!==e[o].indexOf(".css")&&i.push(t(e[o]));return Promise.all(i)},e.addCustomTemplate=function(e,t,n){i[e][t]=n}}(webpublicationNamespace),function(e){function t(){this.init()}var n={};t.prototype.contains=function(e){return"undefined"!=typeof n[e]},t.prototype["delete"]=function(e){var t,n=!1,r=new RegExp("&?"+e+"=[^&]+"),i=location.search.match(r);i&&i[0]&&(t=location.href.replace(i[0],""),t=t.replace("?&","?"),history.replaceState(null,null,t),n=!0,location.href.indexOf("?")>-1&&""===location.search&&(t=location.href.replace("?",""),history.replaceState(null,null,t)));var o=location.hash.match(r);return o&&o[0]&&(t=location.href.replace(o[0],""),t=t.replace("?&","?"),history.replaceState(null,null,t),n=!0,location.href.indexOf("#")>-1&&("#"===location.hash||""===location.hash)&&(t=location.href.replace("#",""),history.replaceState(null,null,t))),n},t.prototype.forEach=function(e,t){for(var r in n)e.call(t||window,n[r],r,n)},t.prototype.get=function(e){return n[e]},t.prototype.getAll=function(){return n},t.prototype.init=function(e){n={};var t="",r="",i="",o="";if(0===location.search.indexOf("?")&&(t=location.search.slice(1)),t.length>0){i=t.split("&");for(var a=0;a<i.length;a++)i[a].indexOf("=")>0?(o=i[a].split("="),n[o[0]]=o[1]):n[i[a]]=!0}if(r="",0===location.hash.indexOf("#")&&(r=location.hash.slice(1)),r.length>0){i=r.split("&");for(var s=0;s<i.length;s++)i[s].indexOf("=")>0?(o=i[s].split("="),n[o[0]]=o[1]):n[i[s]]=!0}},t.prototype.set=function(e,t){var r=!1,i=location.hash.replace("#",""),o=i?i.split("&"):[],a=0;if(null===t){for(a=0;a<o.length;a++)o[a].split("=")[0]===e&&(o[a]=void 0,r=!0);delete n[e]}else{for(a=0;a<o.length;a++)o[a].split("=")[0]===e&&(o[a]=e+"="+t,r=!0);n[e]=t}r===!1&&o.push(e+"="+t),location.hash="#"+o.filter(function(e){return"undefined"!=typeof e}).join("&")},e.Class.UrlManager=t}(webpublicationNamespace),function(e){CommonApi=e.Class.CommonApi,CommonApi.prototype.dispatchEvent=function(t,n){"flash"===e.Main.switcher.mode?this.flashViewer[window.apiActionScriptConfig.javaScriptEventMethod](JSON.stringify({event:"lightbox.close",args:[{}]})):"html"===e.Main.switcher.mode&&this.javascriptviewer.dispatchEvent(t,n)},CommonApi.prototype.actionScriptCall=function(t){var n=window.apiActionScriptConfig.actionScriptApiMethod,r="[actionScriptCall]";return e.Utils._assertObject(t,r+" The first argument must be an object")&&e.Utils._assertString(t.method,r+" The method key in arguments must be a string")&&e.Utils._assertFunction(this.flashViewer[n],r+" The method key in arguments must be a function")?JSON.parse(this.flashViewer[n](JSON.stringify(t))):!1},CommonApi.prototype.registerJavaScript=CommonApi.prototype.register,CommonApi.prototype.registerActionScript=CommonApi.prototype.register,e.Class.CommonApi=CommonApi}(webpublicationNamespace),function(e){function t(){this.os={name:o,version:o},this.device={type:o},this.browser={name:o,version:o},p.call(this),c[this.os.name]&&(this.os.version=c[this.os.name]()),f[this.browser.name]&&(this.browser.version=f[this.browser.name]())}var n={IOS:"iOS",ANDROID:"android",BLACKBERRY:"blackberry",FIREFOX:"firefox",TIZEN:"tizen",WINDOWS:"windows",MAC:"mac",LINUX:"linux"},r={SAFARI:"safari",CHROME:"chrome",FIREFOX:"firefox",ANDROID:"android",TIZEN:"tizen",BLACKBERRY:"blackberry",IE:"ie",EDGE:"edge"},i={PHABLET:"phablet",TABLET:"tab",PHONE:"phone",DESKTOP:"desktop"},o="unknown",a=["android","blackberry","chrome","edge","firefox","ipad","iphone","linux","mac os","mobile","phone","safari","tablet","tizen","touch","trident","windows"],s={},u=navigator.userAgent.toLowerCase();for(var l in a)s[a[l]]=-1!==u.indexOf(a[l]);var c={iOS:function(){return(/CPU.*OS ([0-9]{1,5})/i.exec(navigator.userAgent)||["",o])[1]},android:function(){return(/Android ([0-9.]+)/i.exec(navigator.userAgent)||["",o])[1]},windows:function(){var e=(/Windows Phone ([0-9.]+)/i.exec(navigator.userAgent)||["",o])[1];if(e!==o)return e;var t=(/Windows NT ([0-9.]+)/i.exec(navigator.userAgent)||["",o])[1];switch(t){case"10.0":return"10";case"6.3":return"8.1";case"6.2":return"8";case"6.1":return"7";case"6.0":return"Vista";case"5.2":case"5.1":return"XP";case"5.0":return"2000";default:return o}},mac:function(){var e=/Mac OS.* ([0-9_]+)/i.exec(navigator.userAgent);return e[1]?e[1].split("_").slice(0,2).join("."):o}},f={chrome:function(){return parseInt((/Chrome\/([0-9]+)/.exec(navigator.userAgent)||["",o])[1])},firefox:function(){return parseInt((/Firefox\/([0-9]+)/.exec(navigator.userAgent)||["",o])[1])},ie:function(){var e=(/rv\:([0-9]+)/.exec(navigator.userAgent)||["",o])[1];return e===o&&(e=(/IEMobile\/([0-9]+)/.exec(navigator.userAgent)||["",o])[1]),e===o&&(e=(/MSIE\s([0-9]+)/.exec(navigator.userAgent)||["",o])[1]),parseInt(e,10)},edge:function(){var e=(/Edge\/([0-9]+)\./.exec(navigator.userAgent)||["",o])[1];return parseInt(e,10)},safari:function(){return parseFloat((/Version\/([0-9]+\.[0-9]+)/.exec(navigator.userAgent)||["",o])[1])}},p=function(){var t=Math.max(e.Param.viewBody.getBoundingClientRect().width,e.Param.viewBody.getBoundingClientRect().height);return!s.iphone&&!s.ipad||s.trident?s["mac os"]&&!s.trident?(this.os.name=n.MAC,this.device.type=i.DESKTOP,void(this.browser.name=s.chrome?r.CHROME:s.firefox?r.FIREFOX:r.SAFARI)):(s.windows&&(this.os.name=n.WINDOWS,s.edge?(this.os.name=n.WINDOWS,this.browser.name=r.EDGE):this.browser.name=s.chrome?r.CHROME:s.firefox?r.FIREFOX:r.IE,this.device.type=s.mobile||s.phone?i.PHONE:i.DESKTOP),s.linux&&(this.os.name=n.LINUX,s.chrome?this.browser.name=r.CHROME:s.firefox&&(this.browser.name=r.FIREFOX),this.device.type=i.DESKTOP),s.tizen?(this.os.name=n.TIZEN,void(this.browser.name=r.TIZEN)):s.blackberry?(this.os.name=n.BLACKBERRY,void(this.browser.name=r.BLACKBERRY)):(s.android&&!s.trident?(this.os.name=n.ANDROID,this.device.type=i.TABLET,this.browser.name=s.chrome?r.CHROME:s.firefox?r.FIREFOX:r.ANDROID):s.firefox&&(s.mobile||s.tablet)&&(this.os.name=n.FIREFOX,this.browser.name=r.FIREFOX),void(s.mobile?this.device.type=i.PHONE:this.device.type!==i.DESKTOP&&(this.device.type=t/window.devicePixelRatio<750?i.PHABLET:t/window.devicePixelRatio<=1280?i.TABLET:i.DESKTOP)))):(this.os.name=n.IOS,this.device.type=i.TABLET,this.browser.name=r.SAFARI,void(s.iphone?(this.device.type=i.PHONE,t>750&&!s.safari&&(this.device.type=i.TABLET)):750>t&&(this.device.type=i.PHABLET)))};t.prototype.isDesktop=function(){return this.device.type===i.DESKTOP},t.prototype.isPhone=function(){return this.device.type===i.PHONE},t.prototype.isTablet=function(){return this.device.type===i.TABLET||this.device.type===i.PHABLET},t.prototype.isPhablet=function(){return this.device.type===i.PHABLET},t.prototype.isUnknown=function(){return this.device.type===o},t.prototype.isIE=function(){return this.browser.name===r.IE},t.prototype.OS=n,t.prototype.BROWSER=r,t.prototype.FORMAT=i,t.prototype.UNKNOWN=o,e.Class.UserAgentManager=t}(webpublicationNamespace),function(e){function t(){}var n={},r={_comments:function(e){return e.replace(/<\!\-\-[^>]*\-\-\>/gim,"")},_default:function(e){return e.replace(/\{\{default\((.*?),\s*(.*?)\)\}\}/g,function(e,t,n){return"<% if ( typeof( "+t+' ) === "undefined" ) { var '+t+" = "+n+" } %>"})},_exists:function(e){return e.replace(/\{\{\s*exists\s*(.*?)\s*\}\}/g,function(e,t){return"<% if ( typeof( "+t+') !== "undefined" ) {  %>'}).replace(/\{\{\s*otherwise\s*\}\}/g,function(){return"<% } else { %>"}).replace(/\{\{\s*\/exists\s*\}\}/g,"<% } %>")},_if:function(e){return e.replace(/\{\{\s*(else|if)(.*?)\s*\}\}/g,function(e,t,n){return"if"===t?"<% if("+n+") { %>":""===n&&"else"===t?"<% } else { %>":"else"===t?"<% } else if("+n+") { %>":void 0}).replace(/\{\{\s*\/if\s*\}\}/g,"<% } %>")},_each:function(e){return e.replace(/\{\{\s*each\((.*?),(.*?)\)\s*(.*?)\s*\}\}/g,function(e,t,n,r){return"<% for(var "+t+" in "+r+") { if("+r+" instanceof Array) {"+t+" = parseInt("+t+", 10);} var "+n+" = "+r+"["+t+"]; %>"}).replace(/\{\{\s*\/each\s*\}\}/g,"<% } %>")},_webpublicationNamespace:function(e){return e.replace(/([^a-zA-Z0-9])w\./gi,"$1webpublicationNamespace.")},_ie:function(e){return e.replace(/([0-9a-z_]+)Plugin/gi,"obj.$1Plugin")},_var:function(e){return e=e.replace(/(\r\n|\n|\r)/gm," "),e.replace(/\{\{(.*?)\}\}/g,"<%=$1%>").replace(/\s+/g," ")}},i={},o={},a={icons:function(t){for(var n=t.querySelectorAll(".svgicon svg"),r=n.length;r--;)n[r].getAttribute("data-color")&&e.Utils.svgIcon(n[r],{icon:n[r].getAttribute("data-icon"),color:n[r].getAttribute("data-color")})},focusable:function(){var t=function(t){var n=t.target,r=e.Utils.getClosestByClass(n,"focusable");r!==!1&&(r.classList.add("focused"),window.setTimeout(function(){r.classList.remove("focused")},300))};return function(e){for(var n=e.querySelectorAll(".focusable"),r=n.length;r--;)n[r].addEventListener("vclick",t)}}(),template:function(){var t=function(t,n,r){return l(e.Utils.getTemplate("component",n),r).then(function(e){for(var i=e.length,a=t.parentNode,s=0;i>s;s++)o[n]&&o[n].call(e[s],r,n),null!==a&&e[s]?a.insertBefore(e[s],t):e[s]&&(t=e[s]),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[s]),10);null!==a&&a.removeChild(t)})};return function(n){for(var r=n.querySelectorAll(".templateManagerPlaceholder"),i=[],o=0;o<r.length;o++)if(null!==r[o].parentNode){var a=r[o].getAttribute("data-template"),s=JSON.parse(r[o].getAttribute("data-data")),u=e.require(["js/component/"+a,"css/component/"+a]).then(t.bind(this,r[o],a,s));i.push(u)}return Promise.all(i)}}()},s=function(e,t){for(var n=[],r=0,i=function(){if(--r<=0)for(var e=0;e<n.length;e++){var i=document.createElement("script");i.type="text/javascript",i.innerHTML=n[e],t.appendChild(i)}},o=function(e){if(e.src){var o=document.createElement("script");o.type="text/javascript",o.src=e.src,o.onload=i,r++,t.appendChild(o)}else n.push(e.innerHTML);e.outerHTML=""},a=function(e){var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.href=e.href,t.appendChild(n),e.outerHTML=""},s=e.length,u=0;s>u;u++){if(e[u].getElementsByTagName){for(var l=e[u].getElementsByTagName("script"),c=0;c<l.length;c++)o(l[c]);"SCRIPT"===e[u].tagName&&o(e[u]);for(var f=e[u].getElementsByTagName("link"),p=0;p<f.length;p++)a(f[p]);"LINK"===e[u].tagName&&a(e[u])}t.appendChild(e[u]),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[u]),10)}return e},u=function(e){for(var t in r)e=r[t](e);return new Function("obj","var w=webpublicationNamespace;var p=[];with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');")},l=function(t,n,r){n=n||{},"String"===e.Utils.getFunctionName(n.constructor)&&(n={content:n});for(var o in i)n[o+"Plugin"]=i[o];return Promise.resolve(c(t)).then(f.bind(this,t,n,r))},c=function(t){return"undefined"==typeof n[t]&&(n[t]=e.require(t).then(function(e){return Promise.resolve(u(e.responseText))})),n[t]},f=function(e,t,n,r){var i="div";t&&t.useTr===!0&&(i="table");var o=document.createElement(i);o.id="tmplWrapper",o.innerHTML=r(t),"table"===i&&(o=o.getElementsByTagName("tr")[0].parentNode);var s=[];if(o.querySelectorAll)for(var u in a)s.push(a[u](o,n));return Promise.all(s).then(function(){var t=[],n=o.childNodes.length,r=!1;for(-1!==e.indexOf("component")&&(r=e.replace(".html","").split("/"),r=r[r.length-1]);n--;){var i=o.childNodes[n];(3!==i.nodeType||""!==i.textContent.trim())&&t.unshift(i)}return Promise.resolve(t)})},p=function(e,t){for(var n=e.length;n--;)t.parentNode.insertBefore(e[n],t),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[n]),10);return e},g=function(e,t){for(var n=e.length;n--;)t.insertBefore(e[n],t.firstChild),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[n]),10);return e},m=function(e,t){var n=null;n=t instanceof Node?t:t[0];for(var r=0;r<e.length;r++)n.parentNode.insertBefore(e[r],n),window.setTimeout(function(){this.onTemplateInserted&&this.onTemplateInserted()}.bind(e[r]),10);if(t instanceof Node)t.parentNode.removeChild(t);else for(var i=0;i<t.length;i++)t[i].parentNode.removeChild(t[i]);return e};t.addCallback=function(e,t){a[e]=t},t.addComponent=function(e,t){o[e]=t},t.addPlugin=function(e,t){i[e]=t},t.getPlugin=function(){return i},t.getComponentScript=function(){return o},t.getCache=function(){return n},t.prototype.load=function(t,n,r){return l(t,r,n).then(function(t){return e.Utils.empty(n),s(t,n)})},t.prototype.loadAppend=function(e,t,n){return l(e,n,t).then(function(e){return s(e,t)})},t.prototype.loadPrepend=function(e,t,n){return l(e,n,t).then(function(e){return g(e,t)})},t.prototype.loadBefore=function(e,t,n){return l(e,n,t).then(function(e){return p(e,t)})},t.prototype.loadReplace=function(e,t,n){return l(e,n,t).then(function(e){return m(e,t)})},e.Class.TemplateManager=t,e.Class.TemplateManager.addPlugin("escape",function(e){return e?e.replace("'","\\'"):void 0}),e.Class.TemplateManager.addPlugin("locale",function(t){return e.Utils.prodTools.getWordLangueByIndex(t)}),e.Class.TemplateManager.addPlugin("icon",function(t,n,r,i){var o=document.createElement("div");if(o.className="svgicon-new svgicon-"+t+" "+n,i)for(var a in i)o.setAttribute(a,i[a]);return e.Utils.svgIcon(o,{icon:t,color:r||null}),o.outerHTML}),e.Class.TemplateManager.addPlugin("encode",function(e){return isNaN(e)?encodeURIComponent(e):void 0}),e.Class.TemplateManager.addPlugin("template",function(e,t){var n="div";return t&&t.useTr===!0&&(n="tr"),t=t?JSON.stringify(t).replace(/"/g,"&quot;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;"):"{}","<"+n+' class="templateManagerPlaceholder" data-template="'+e+'" data-data="'+t+'"></'+n+">"})}(webpublicationNamespace),function(e){function t(){}var n,r,i=[];t.prototype.execute=function(t,i){if(r=i,n=e.Main.xmlManager.getVariable("transferring"),"undefined"==typeof n)return Promise.resolve();var o=new e.Class.QueryManager,a=t.querySelector("proxy");return a?o.execute(a).then(function(e){return r.transferring=e,Promise.resolve(e)}).then(o.execute.bind({},t)).then(this.parseData):o.execute(t).then(this.parseData)},t.prototype.parseData=function(){function e(t,n){for(var o in n)"object"==typeof n[o]&&n[o]instanceof Array==!1?e(t+"_"+o,n[o]):(r[t+"_"+o]=n[o],i.push(t+"_"+o))}return function(t){return e("transferring",t),r.transferring=n,Promise.resolve()}}(),t.prototype.remove=function(){localStorage&&localStorage.removeItem("transferring");for(var t in r)0===t.indexOf("transferring")&&delete r[t];return e.Main.urlManager["delete"]("transferring")},e.Class.TransferringManager=t}(webpublicationNamespace),function(e){function t(e,t){for(var n=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),r=[],i=[],o=!1,a=0,s=null;null!==(s=n.exec(e));){var u=s[1];u.length&&u!==t&&(r.push({}),o=!0,a=0);var l;l=s[2]?s[2].replace(new RegExp('""',"g"),'"'):s[3],o===!1?i.push(l):r[r.length-1][i[a]]=l,a++}return r}function n(n,r){var i=t(r.trim(),n.getAttribute("separator")||","),o=n.querySelector("matchingProp");if(o){var a=e.Main.xmlManager.getVariable("transferring")||e.Main.urlManager.get("transferring");return i.filter(function(e){return e[o.getAttribute("id")]===a})[0]}return i}function r(e,t){var n=JSON.parse(t),r=e.querySelector("matchingProp");return r?n[r.getAttribute("id")]:n}function i(){}i.prototype.execute=function(t){var i,o=Array.prototype.filter.call(t.childNodes,function(e){return"dataset"===e.nodeName})[0],a=Array.prototype.filter.call(t.childNodes,function(e){return"url"===e.nodeName})[0],s=Array.prototype.filter.call(t.childNodes,function(e){return"asset"===e.nodeName})[0],u=o.getAttribute("type");a?i=a.textContent:s&&(i=e.Main.xmlManager.get("common-ui","assets",s.getAttribute("id")),i=i.hasOwnProperty("url")?i.url:i);var l=[];return a&&a.hasAttribute&&a.hasAttribute("username")&&a.hasAttribute("password")&&l.push({key:"Authorization",username:a.getAttribute("username"),password:a.getAttribute("password")}),e.Utils.promiseXHR("GET",e.Utils.resolveVariable(i),l).then(function(e){var t=null;return"JSON"===u?t=r(o,e.responseText):"CSV"===u&&(t=n(o,e.responseText)),Promise.resolve(t)})},e.Class.QueryManager=i}(webpublicationNamespace),function(e){function t(){}var n={},r={},i={pubinfo:{},
contents:{},template:{},locale:{},config:{get:function(){return null}},ui:{},"common-ui":{},"common-configuration":{},summary:{},statistics:{get:function(){return null}}},o={pubinfo:function(e){"https:"===location.protocol&&(n.managerHost=(n.managerHost||n.manager_host).replace("http:","https:").replace(":80",":443")),i.pubinfo.template=null,i.pubinfo.contents=null,i.pubinfo.statistics="publication/contents/statistics.xml";for(var t=e.documentElement.childNodes,r=0;r<t.length;r++)"template"===t[r].tagName?i.pubinfo.template=this.resolver(t[r].getAttribute("url")):"contents"===t[r].tagName?i.pubinfo.contents=this.resolver(t[r].getAttribute("url")):"statistics"===t[r].tagName&&(i.pubinfo.statistics=this.resolver(t[r].getAttribute("url")));n.root="publication/",i.pubinfo.get=function(e){return i.pubinfo[e]}},contents:function(t){var n=t.querySelector("contents");i.contents.config={pages_nr:parseInt(n.getAttribute("pages_nr")),shift:parseInt(n.getAttribute("shift")),prefix:n.getAttribute("prefix"),padding:parseInt(n.getAttribute("padding"))},NIApi.register("page.getCount",function(){return Promise.resolve(e.Main.xmlManager.get("common-configuration","config","pageCount"))}),i.contents.content={};for(var r=t.querySelectorAll("contents > content"),o=0;o<r.length;o++){var a=r[o].getAttribute("id").toLowerCase();i.contents.content[a]={id:a,width:parseInt(r[o].getAttribute("width")),height:parseInt(r[o].getAttribute("height")),path:this.resolver(r[o].getAttribute("path")),type:r[o].getAttribute("type"),ext:r[o].getAttribute("ext"),prefix:r[o].getAttribute("prefix")}}i.contents.get=function(e,t){if("undefined"!=typeof t)return i.contents.content[e][t];switch("thumbnails"===e&&i.contents.content.thumbnails_xdpi&&window.devicePixelRatio>=2&&(e="thumbnailsxdpi"),e){case"thumbnails_xdpi":e="thumbnailsxdpi";break;case"zoom_hd":e="zoomhd";break;case"full_pdf":e="fullPdf";break;default:e=e}if("undefined"==typeof i.contents.content[e])return null;var n="";return i.contents.content[e].prefix&&(n+=i.contents.content[e].prefix),i.contents.content[e].ext&&(n+="."+i.contents.content[e].ext),i.contents.content[e].path+n}},template:function(t){var n=t.querySelector("configs"),r=n.querySelector("preloader");i.template.configs={preloader:{wait_animation_preload:r.getAttribute("wait_animation_preload"),backgroundColor:r.getAttribute("backgroundColor"),progressColor:r.getAttribute("progressColor"),totalSizeColor:r.getAttribute("totalSizeColor")}},i.template.asset={};for(var o=t.querySelectorAll("assets > asset"),a=0;a<o.length;a++){var s=o[a].getAttribute("id");i.template.asset[s]={id:s,url:this.resolver(o[a].getAttribute("url")),type:o[a].getAttribute("type"),appdom:o[a].getAttribute("appdom")},"locale"===s&&(i.template.asset.localeFlash={id:s,url:this.resolver(o[a].getAttribute("url")),type:o[a].getAttribute("type"),appdom:o[a].getAttribute("appdom")})}i.template.asset.localeHtml||(i.template.asset.localeHtml=i.template.asset.locale,i.template.asset.localeHtml.url="publication/locale/mobile/messages_"+e.Main.xmlManager.getVariable("locale")+".xml"),i.template.asset.css_html5&&-1!==i.template.asset.css_html5.url.indexOf("flash")&&(i.template.asset.css_html5={url:null}),i.template.get=function(e,t){return i.template.asset[e]?i.template.asset[e]:null},i.template.getConfig=function(e,t){return i.template.configs[e][t]}},locale:function(e){i.locale.messages=i.locale.messages||{};for(var t=e.querySelectorAll("message"),n=0;n<t.length;n++)i.locale.messages[t[n].getAttribute("id")]=t[n].textContent;i.locale.get=function(e){return i.locale.messages[e]}},localeFlash:function(e){i.locale.messages=i.locale.messages||{};for(var t=e.querySelectorAll("message"),n=0;n<t.length;n++)"undefined"==typeof i.locale.messages[t[n].getAttribute("id")]&&(i.locale.messages[t[n].getAttribute("id")]=t[n].textContent);for(var r=e.querySelectorAll("string"),o=0;o<r.length;o++)"undefined"==typeof i.locale.messages[r[o].getAttribute("name")]&&(i.locale.messages[r[o].getAttribute("name")]=r[o].textContent)},config:function(t){"undefined"==typeof e.Main.viewerService&&(e.Main.viewerService=new e.Class.ViewerService(null));var r=t.querySelector("modules email");i.config.services={pdf:{url:this.resolver(t.querySelector("modules pdf").getAttribute("mergeservice"))},email:{url:this.resolver(r.getAttribute("service")),template:this.resolver(r.getAttribute("customTemplatePath")),templateTransferring:this.resolver(r.getAttribute("customTransferringTemplatePath")),subject:this.resolver(r.getAttribute("subject"))}},i.config.config={search:{},links:{}};var o=t.querySelector("search");o.querySelector("result")&&(i.config.config.search.prefix=o.querySelector("result").getAttribute("prefix"),i.config.config.search.suffix=o.querySelector("result").getAttribute("suffix"));var a=t.querySelector("pageLayoutHTML")||t.querySelector("pageLayout");a&&(i.config.config.pageLayout=a.getAttribute("value")),i.config.config.pageLayout=e.Main.urlManager.get("pageLayoutHTML")||e.Main.urlManager.get("pageLayout")||i.config.config.pageLayout;var s=t.querySelector("deepLinking"),u=s&&"true"===s.getAttribute("value");i.config.config.deepLinking=u,i.config.config.GAStatsEnabled=!1,i.config.config.GAStatsId="",i.config.config.GAStatsLabel="";var l=t.querySelector("stats GAStats");l&&(i.config.config.GAStatsEnabled=!0,i.config.config.GAStatsId=l.getAttribute("account"),i.config.config.GAStatsLabel=l.getAttribute("labelTrack"));var c;if(i.config.config.transferring=t.querySelector("transferring"),i.config.config.transferringVariable="transferring",i.config.config.transferring){var f="transferring";i.config.config.transferring.hasAttribute("variable")&&(f=i.config.config.transferring.getAttribute("variable")),i.config.config.transferringVariable=f,n.transferring=e.Main.urlManager.get(f)||localStorage&&localStorage.getItem(f)||n[f],e.Main.transferring=new e.Class.TransferringManager,c=e.Main.transferring.execute(i.config.config.transferring,n)}var p=t.querySelector("configs > links");return p&&(i.config.config.links={mode:p.getAttribute("mode")},p.hasAttribute("duration")&&(i.config.config.links.duration=parseInt(p.getAttribute("duration"),10))),i.config.get=function(e){return i.config.config[e]},i.config.getService=function(e,t){return i.config.services[e][t]},NIApi.register("viewer.getCurrentMode",function(){return Promise.resolve(e.Main.xmlManager.get("common-ui","configs","pageLayout"))}),c},"common-ui":function(t){var n,r=t.querySelector("menu_config");if(r){i["common-ui"].menu={left:[],center:[],right:[],burger:[]};var o,a,s=["left","center","right","burger"],u=["default"];u.push(e.Param.isDesktop?"desktop":e.Param.isTablet?"tablet":"mobile");var l=function(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;if("logo"===t.name){var r=e.querySelector("file");t.file={image:r.getAttribute("url"),url:r.getAttribute("href"),scale:r.getAttribute("scale")}}return t},c=function(e){return Array.prototype.slice.call(e.querySelectorAll("element")).map(function(e){return l(e)})},f=[];for(var p in u)if(p=r.querySelector("mode[name='"+u[p]+"']"))for(a in s)o=p.querySelector("menu[name='menu-"+s[a]+"']"),o&&(f[s[a]]=c(o));i["common-ui"].menu=f}else n=e.Main.xmlManager.parse("ui","publication/contents/templates/ui.xml");i["common-ui"].assets={};for(var g=t.querySelectorAll("template > asset"),m=0;m<g.length;m++){var d=g[m].getAttribute("name");i["common-ui"].assets[d]={name:d,url:g[m].getAttribute("url")},"locale"===d&&(i["common-ui"].assets.localeFlash={name:d,url:g[m].getAttribute("url")})}i["common-ui"].assets.localeHtml||(i["common-ui"].assets.localeHtml=i["common-ui"].assets.locale,i["common-ui"].assets.localeHtml.url="publication/locale/mobile/messages_"+e.Main.xmlManager.getVariable("locale")+".xml"),i["common-ui"].services={};for(var h=t.querySelectorAll("services > service"),v=0;v<h.length;v++){var b=h[v].getAttribute("id");i["common-ui"].services[b]={};for(var y=0;y<h[v].attributes.length;y++){var A=h[v].attributes[y];i["common-ui"].services[b][A.name]=A.value}}i["common-ui"].configs={},i["common-ui"].configs.deepLinking=!0;var w=t.querySelector("configs > deep_linking");w&&"true"!==w.getAttribute("value")&&(i["common-ui"].configs.deepLinking=!1),i["common-ui"].configs.pageLayout="auto";var M=t.querySelector("configs > page_layout"),S=t.querySelector("configs > page_layout_html");S?i["common-ui"].configs.pageLayout=S.getAttribute("value"):M&&(i["common-ui"].configs.pageLayout=M.getAttribute("value"));var x=t.querySelector("configs > viewer");e.Main.viewerService=new e.Class.ViewerService(x);var P=t.querySelector("configs > links");return i["common-ui"].configs.links={},P&&(i["common-ui"].configs.links.mode=P.getAttribute("mode"),P.hasAttribute("duration")&&(i["common-ui"].configs.links.duration=parseInt(P.getAttribute("duration"),10))),i["common-ui"].get=function(e,t,n){var r=i["common-ui"][e];return t?(r=r[t],n&&r?r[n]:r?r:null):r?r:null},n},"common-configuration":function(t){var n=t.querySelector("contents");i["common-configuration"].config={pageCount:parseInt(n.getAttribute("pages_count"),10),shift:parseInt(n.getAttribute("shift"),10)},i["common-configuration"].contents={};for(var r=t.querySelectorAll("contents > content"),o=0;o<r.length;o++){var a=r[o].getAttribute("id");i["common-configuration"].contents[a]={id:a,width:parseInt(r[o].getAttribute("width")),height:parseInt(r[o].getAttribute("height")),path:this.resolver(r[o].getAttribute("path"))}}i["common-configuration"].get=function(e,t,n){var r=i["common-configuration"][e];return t?(r=r[t],n&&r?r[n]:r?r:null):r?r:null},NIApi.register("page.getCount",function(){return Promise.resolve(e.Main.xmlManager.get("common-configuration","config","pageCount"))})},ui:function(e){function t(e){return e.name!==this.name||y.indexOf(e.priority)>y.indexOf(this.priority)}function n(e){return e.name===this.name}function r(e){v=v.filter(t,e),0===v.filter(n,e).length&&v.push(e)}i.ui.data={};var o=e.querySelector("uielements>element[id='logo']");if(o){var a=o.querySelector("content file"),s=o.querySelector("useract"),u=o.querySelector("scale"),l=o.querySelector("mobilescale");a&&a.getAttribute("url").indexOf(".swf")<0&&(i.ui.data.logo={image:a.getAttribute("url"),scale:null===l&&null===u},null!==s&&(i.ui.data.logo.url=s.getAttribute("param")))}var c=e.querySelector("element[id='background']");if(c){i.ui.data.background={};var f=c.querySelector("content file");f&&(i.ui.data.background.image=this.resolver(f.getAttribute("url")));var p=c.querySelector("position scale");p&&(i.ui.data.background.scale=this.resolver(p.getAttribute("fit")))}i.ui.data.menu={};for(var g,m,d,h=[],v=[],b=["left","center","right"],y=["lowest","low","medium","high","highest"],A=!1,w=0;w<b.length;w++){for(v=[],h=e.querySelectorAll("uielements [id='menu_"+b[w]+"'] element"),h=Array.prototype.slice.call(h,0),g=0;g<h.length;g++)"string"!=typeof h[g].getAttribute("priority")&&h[g].setAttribute("priority","medium"),m=h[g].getAttribute("id"),d=h[g].getAttribute("priority"),r({name:m,priority:d}),"logo"===m&&(A=!0);i.ui.data.menu[b[w]]=v}A===!1&&i.ui.data.logo&&i.ui.data.menu.center.push({name:"logo",priority:"highest"}),i.ui.data.pageShadow=null!==e.querySelector("ShadowElement"),i.ui.get=function(e){return i.ui.data[e]}},summary:function(e){i.summary.xml=e,i.summary.get=function(){return i.summary.xml}},statistics:function(e){var t=e.querySelector("Statistics");i.statistics.version=parseInt(t.getAttribute("version")||"1",10),i.statistics.servers=t.querySelector("servers"),i.statistics.events=t.querySelector("events"),i.statistics.pages=t.querySelector("pages"),i.statistics.get=function(e){return i.statistics[e]}}};t.prototype.getVariable=function(t){if(2!==e.Main.startupManager.get("reader.configurationVersion"))switch(t){case"manager_host":return n.managerHost;case"client_id":return n.clientId;case"id":return n.aspgenerationId}return n[t]},t.prototype.getVariables=function(){return n},t.prototype.get=function(t,n,r,i){if("viewer"===r)return e.Main[r+"Service"].get(i);var o=this.getProxy(t,n,r,i);return"string"==typeof o?this.resolver(o):o},t.prototype.getProxy=function(t,n,r,o){return 2===e.Main.startupManager.get("reader.configurationVersion")&&"config"===t&&"transferringVariable"===n?"transferring":"config"===t?i.config.get||"GAStatsEnabled"!==n?i.config.get(n,r,o):!1:"summary"===t?i.summary.get(n,r,o):"ui"===t&&"background"===n?i.ui.get("background"):"ui"===t&&"logo"===n?i.ui.get("logo"):"ui"===t&&"menu"===n?i.ui.get("menu"):"pubinfo"===t?i.pubinfo.get(n,r,o):"common-ui"===t&&"logo"===n?i[t].get&&i[t].get(n,r,o)||i.ui.get&&i.ui.get("logo"):2===e.Main.startupManager.get("reader.configurationVersion")?"undefined"==typeof n?i[t]:i[t].get(n,r,o):"common-ui"===t&&"service"===n?i.config.getService(r,o):"common-ui"===t&&"configs"===n&&"deepLinking"===r?i.config.config.deepLinking:"common-ui"===t&&"configs"===n&&"pageLayout"===r?i.config.config.pageLayout:"common-ui"===t&&"configs"===n&&"links"===r?i.config.get(r)[o]:"common-ui"===t&&"configs"===n&&"viewer"===r?null:"common-ui"===t&&"assets"===n?i.template.get(r,o):"common-ui"===t&&"logo"===n?i.ui.get(n,r,o):"common-configuration"===t&&"config"===n&&"pageCount"===r?i.contents.config.pages_nr:"common-configuration"===t&&"config"===n&&"shift"===r?i.contents.config.shift:"common-configuration"===t&&"contents"===n?"path"===o?i.contents.get(r):i.contents.get(r,o):"statistics"===t?i.statistics.get(n,r,o):"locale"===t?i.locale.get(n,r,o):"common-ui"===t&&"menu"===n?null:"common-ui"===t&&"services"===n&&"sendmail"===r?i.config.getService("email",o):void console.log(t,n,r,o)},t.prototype.getXml=function(e){return r[e]?r[e]:void 0},t.prototype.resolver=function(){function e(e,t){return"undefined"!=typeof n[t]?n[t]:e}return function(t){return t?t.replace(/^~\//g,"publication/").replace(/\$([^\$]*)\$/g,e).replace(/\$\{([A-Za-z0-9-_]+)\}/gi,e):t}}(),t.prototype.parse=function(t,i){return e.Utils.promiseXHR("GET",i).then(function(i){var a=i.responseXML;if(!a){var s=new DOMParser;a=s.parseFromString(i.responseText,"text/xml")}r[t]=a;var u=a.getElementsByTagName("variables")[0];if(u){for(var l=u.childNodes,c=0;c<l.length;c++)if(1===l[c].nodeType&&l[c].getAttribute("value")){var f;f=2===e.Main.startupManager.get("reader.configurationVersion")?l[c].getAttribute("id"):l[c].tagName,n[f]=this.resolver(l[c].getAttribute("value")),"root"===f&&(n.root="./publication/"),"media"===f&&location.href.indexOf("isApp")>-1&&(n.media=n.media.replace("assets/",""))}for(var p in n)n[p]=this.resolver(n[p])}var g=o[t].call(this,a);return g instanceof Promise?g:Promise.resolve(!0)}.bind(this))["catch"](function(){})},e.Class.XmlManager=t}(webpublicationNamespace),function(w){function StartupManager(){}var data={reader:{type:"auto",mode:"3d"},ui:{paging:{mode:["bottom","lateral"],lateral:{hasPrevNext:!0,hasFirstLast:!0,display:"near"}},menu:{mode:["aside","topnav"]},carousel:{mode:["standard"]},zoom:{mode:["doubleclick","pinch"]},theme:{mode:["v4"]}},core:{session:"client",viewer:"v4",viewerDirection:"horizontal",mode:["canvas"],format:["img"]}};StartupManager.prototype._set=function(key,value){eval("data."+key+'="'+value+'"')},StartupManager.prototype.start=function(){return w.Utils.promiseXHR("GET","publication/contents/templates/startup.json").then(function(e){return e.responseText&&(data=JSON.parse(e.responseText)),Promise.resolve(!0)})["catch"](function(e){return console&&console.error&&console.error("Failed to load the startup.json. There is probably a syntax error. Message: "+e.toString()),Promise.resolve(!0)})},StartupManager.prototype.get=function(e){if(0===e.indexOf("ui.")){var t=w.Param.userAgent.device.type,n=t.charAt(0).toUpperCase()+t.slice(1),r="ui"+n,i=this.get(e.replace(/^ui\./,r+"."));if(null!==i)return i}for(var o=e.split("."),a=data,s=0;s<o.length;s++){if("undefined"==typeof a[o[s]])return null;a=a[o[s]]}return a},StartupManager.prototype.has=function(e,t){var n=this.get(e);return n instanceof Array&&n.indexOf(t)>-1},w.Class.StartupManager=StartupManager}(webpublicationNamespace),function(e){function t(){if(e.Param.viewBody.setAttribute("touch-action","none"),e.Main.templateManager=new e.Class.TemplateManager,e.Main.urlManager=new e.Class.UrlManager,e.Param.isLocalReader="http:"!==location.protocol&&"https:"!==location.protocol,e.Param.isApp="file:"===location.protocol||"ms-local-stream:"===location.protocol,e.Param.isTouch="ontouchstart"in document.documentElement,this.setMode(),this.createSession(),e.Param.userAgent.browser.name===e.Param.userAgent.BROWSER.IE&&e.Param.userAgent.browser.version<11){var t=document.createElement("script");t.type="text/javascript",t.src="global_conf/jquery.js",t.onreadystatechange=function(){("loaded"===t.readyState||"complete"===t.readyState)&&n.call(this)}.bind(this),document.getElementsByTagName("head")[0].appendChild(t)}else n.call(this)}var n=function(){if(e.Main.startupManager.get("reader.url.flash")&&"flash"===this.mode)return void(location.href=e.Main.startupManager.get("reader.url.flash")+location.search+location.hash);if("html"===this.mode){var t="reader.url.html"+e.Utils.capitalize(e.Param.userAgent.device.type),n="reader.url.html";if(e.Main.startupManager.get(t))return void(location.href=e.Main.startupManager.get(t)+location.search+location.hash);if(e.Main.startupManager.get(n))return void(location.href=e.Main.startupManager.get(n)+location.search+location.hash)}if("undefined"!=typeof jQuery)$.get(this.getBody(),function(t){$(e.Param.viewBody).append(t)}),$.get(this.getHead(),function(t){$(e.Param.viewHead).append(t),this.mobileSupported===!0&&$(".noflash-mobile").css("display","none")}.bind(this)),$("body").append('<link rel="stylesheet" id="flash-style" type="text/css" href="global_conf/css/flash.css" />');else if(e.Main.templateManager.loadAppend(this.getBody(),e.Param.viewBody),e.Main.templateManager.loadAppend(this.getHead(),e.Param.viewHead),this.mobileSupported===!0)for(var r=document.querySelectorAll(".noflash-mobile"),i=0;i<r.length;i++)r[i].style.display="none"};t.prototype.mode="flash",t.prototype.getBody=function(){return"./global_conf/template/"+this.mode+"/body.html"},t.prototype.getHead=function(){return"./global_conf/template/"+this.mode+"/head.html"},t.prototype.createSession=function(){var t=e.Main.xmlManager.getVariable("client_id"),n=e.Main.xmlManager.getVariable("id"),r=e.Main.startupManager.get("core.session")||"single",i=e.Utils.getCookie("session_"+t),o=t+"_";i=i?i.split(";"):[],"single"===r&&(o=n+o);for(var a=0;a<i.length;a++)if(0===atob(i[a]).indexOf(o))return e.Param.sessionId=i[a],void(e.Param.sessionId=e.Param.sessionId.replace(/=/g,""));e.Param.sessionId=btoa(o+Math.random().toString().substring(2)),i.push(e.Param.sessionId),e.Utils.setCookie("session_"+t,i.join(";"),1),e.Param.sessionId=e.Param.sessionId.replace(/=/g,"")},t.prototype.setMode=function(t){this.mode="flash"===e.Main.urlManager.get("version")||"flash"===e.Main.startupManager.get("reader.type")?"flash":e.Main.urlManager.contains("forceMobile")===!0||"html"===e.Main.urlManager.get("version")||"true"===e.Main.urlManager.get("isApp")||"html"===e.Main.startupManager.get("reader.type")?"html":"undefined"==typeof t?e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.TABLET||e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.PHONE||e.Param.userAgent.device.type===e.Param.userAgent.FORMAT.PHABLET?"html":"flash":t,this.mobileSupported=!0,e.Param.userAgent.browser.name!==e.Param.userAgent.BROWSER.ANDROID&&e.Param.userAgent.browser.name!==e.Param.userAgent.BROWSER.BLACKBERRY&&e.Param.userAgent.browser.name!==e.Param.userAgent.BROWSER.CHROME&&e.Param.userAgent.browser.name!==e.Param.userAgent.BROWSER.EDGE&&e.Param.userAgent.browser.name!==e.Param.userAgent.BROWSER.FIREFOX&&e.Param.userAgent.browser.name!==e.Param.userAgent.BROWSER.SAFARI&&e.Param.userAgent.browser.name!==e.Param.userAgent.BROWSER.TIZEN&&e.Param.userAgent.os.name!==e.Param.userAgent.OS.IOS&&e.Param.userAgent.os.name!==e.Param.userAgent.OS.ANDROID&&(e.Param.userAgent.browser.name===e.Param.userAgent.BROWSER.IE&&e.Param.userAgent.browser.version>=11)!=!0&&(this.mode="flash",this.mobileSupported=!1)},t.prototype.rebuild=function(){return this.mode="html",n.call(this)},e.Class.Switcher=t}(webpublicationNamespace),function(e){return e.Param.viewBody=document.body,e.Param.viewHead=document.getElementsByTagName("head")[0],e.Param.userAgent=new e.Class.UserAgentManager,e.Param.isDesktop=e.Param.userAgent.isDesktop(),e.Param.isPhone=e.Param.userAgent.isPhone(),e.Param.isTablet=e.Param.userAgent.isTablet(),e.Param.isPhablet=e.Param.userAgent.isPhablet(),e.Param.isUnknown=e.Param.userAgent.isUnknown(),e.Main.startupManager=new e.Class.StartupManager,e.Main.startupManager.start().then(function(){e.Main.xmlManager=new e.Class.XmlManager;var t=Promise.resolve();2!==e.Main.startupManager.get("reader.configurationVersion")&&(t=t.then(Promise.reject)),t.then(function(){return e.Main.xmlManager.parse("common-configuration",e.Param.pathRoot+"contents/common-configuration.xml").then(function(){return"undefined"==typeof e.Main.xmlManager.getXml("common-configuration")?(console&&console.error&&console.error("No new conf file available, switching to the old model"),e.Main.startupManager._set("reader.configurationVersion",1),Promise.reject()):e.Main.xmlManager.parse("common-ui",e.Param.pathRoot+"contents/templates/common-ui.xml")}).then(function(){e.Main.switcher=new e.Class.Switcher,e.Main.xmlManager.parse("statistics",e.Param.pathRoot+"contents/statistics.xml").then(e.require.bind(e,["../../global_conf/common.js"])).then(function(){2===e.Main.xmlManager.get("statistics","version")&&(e.Main.trackerManager=new e.Class.TrackerManager)})})})["catch"](function(){e.Main.xmlManager.parse("pubinfo",e.Param.pathRoot+"contents/pubinfo.xml").then(function(){return e.Main.xmlManager.parse("contents",e.Main.xmlManager.get("pubinfo","contents"))}).then(function(){return e.Main.xmlManager.parse("template",e.Main.xmlManager.get("pubinfo","template"))}).then(function(){e.Main.switcher=new e.Class.Switcher,e.Main.xmlManager.parse("statistics",e.Main.xmlManager.get("pubinfo","statistics")).then(e.require.bind(e,["../../global_conf/common.js"])).then(function(){2===e.Main.xmlManager.get("statistics","version")&&(e.Main.trackerManager=new e.Class.TrackerManager)})})})})}(webpublicationNamespace),function(e){function t(){}var n={};t.prototype.fetch=function(){var t=e.Main.xmlManager.get("common-ui","assets","common_layout");if(!t)return Promise.resolve(!0);var r=e.Utils.resolveVariable(t.url?t.url:t);e.Utils.promiseXHR("GET",r).then(function(e){return e.responseText&&(n=JSON.parse(e.responseText)),Promise.resolve(!0)})["catch"](function(){return Promise.resolve(!0)})},t.prototype.set=function(e,t){for(var r=e.split("."),i=n,o=0;o<r.length-1;o++)i.hasOwnProperty(r[o])||(i[r[o]]={}),i=i[r[o]];i[r[r.length-1]]=t},t.prototype.get=function(e){for(var t=e.split("."),r=n,i=0;i<t.length;i++){if("undefined"==typeof r[t[i]])return null;r=r[t[i]]}return r},e.Class.CommonLayout=t}(webpublicationNamespace),function(e){function t(){return e.Param.isTablet?"tablet":e.Param.isPhone?"phone":e.Param.isDesktop?"desktop":void 0}function n(e){this.viewerConfig={device:t(),rotateClue:null,padding:{portrait:{},landscape:{}}}}function r(e){if(null!==e){e.hasAttribute("rotate_clue")&&(this.viewerConfig.rotateClue=e.getAttribute("rotate_clue"));var t=this.viewerConfig.device,n=e.querySelector("mode[name="+t+"]");n&&n.hasAttribute("rotate_clue")&&(this.viewerConfig.rotateClue=n.getAttribute("rotate_clue"))}}function i(t){if(null!==t){var n=this.viewerConfig.device,r=t.querySelector("mode[name="+n+"]");if(r){var i=r.querySelectorAll("padding");Array.prototype.forEach.call(i,function(t){for(var n=this.viewerConfig.padding,r=Object.keys(n.portrait).length>0,i=Object.keys(n.landscape).length>0,o=1;o<a.length;o++){var s=t.getAttribute(a[0]),u=s?s:t.getAttribute(a[o]),l="padding"+e.Utils.capitalize(a[o]);if(u)if(u=parseInt(u,10),t.hasAttribute("orientation")){var c=t.getAttribute("orientation");this.viewerConfig.padding[c][l]=u}else r===!1&&(this.viewerConfig.padding.portrait[l]=u),i===!1&&(this.viewerConfig.padding.landscape[l]=u)}}.bind(this))}}}function o(e){n.call(this,e),r.call(this,e),i.call(this,e)}var a=["all","top","right","left","bottom"],s={paddingTop:0,paddingRight:0,paddingLeft:0,paddingBottom:0};o.prototype.getPadding=function(){var t={},n=e.Param.isPortrait?"portrait":"landscape";for(var r in s)t[r]=s[r];for(var i in this.viewerConfig.padding[n])t[i]=this.viewerConfig.padding[n][i];return t},o.prototype.getRotateClue=function(){return this.viewerConfig.rotateClue},o.prototype.get=function(t){return t=e.Utils.capitalize(t),this["get"+t]()},o.prototype.set=function(e){for(var t in e)if(0===t.indexOf("padding")){var n=this.viewerConfig.padding;n.portrait[t]=n.portrait[t]||e[t],n.landscape[t]=n.landscape[t]||e[t]}else this.viewerConfig[t]=e[t]},e.Class.ViewerService=o}(webpublicationNamespace);